(self.webpackChunk=self.webpackChunk||[]).push([[393],{41733:(e,t,n)=>{"use strict";var r=n(64836);t.Z=void 0;var o=r(n(64938)),a=n(85893),i=(0,o.default)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=i},64938:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(76031)},26447:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(63366),o=n(87462),a=n(67294),i=n(95408),s=n(44472),c=n(39707),l=n(59766),u=n(90948),f=n(71657),d=n(85893);const p=["component","direction","spacing","divider","children"];function m(e,t){const n=a.Children.toArray(e).filter(Boolean);return n.reduce(((e,r,o)=>(e.push(r),o<n.length-1&&e.push(a.cloneElement(t,{key:`separator-${o}`})),e)),[])}const h=(0,u.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>[t.root]})((({ownerState:e,theme:t})=>{let n=(0,o.Z)({display:"flex"},(0,i.k9)({theme:t},(0,i.P$)({values:e.direction,breakpoints:t.breakpoints.values}),(e=>({flexDirection:e}))));if(e.spacing){const r=(0,s.hB)(t),o=Object.keys(t.breakpoints.values).reduce(((t,n)=>(null==e.spacing[n]&&null==e.direction[n]||(t[n]=!0),t)),{}),a=(0,i.P$)({values:e.direction,base:o}),c=(0,i.P$)({values:e.spacing,base:o}),u=(t,n)=>{return{"& > :not(style) + :not(style)":{margin:0,[`margin${o=n?a[n]:e.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[o]}`]:(0,s.NA)(r,t)}};var o};n=(0,l.Z)(n,(0,i.k9)({theme:t},c,u))}return n})),g=a.forwardRef((function(e,t){const n=(0,f.Z)({props:e,name:"MuiStack"}),a=(0,c.Z)(n),{component:i="div",direction:s="column",spacing:l=0,divider:u,children:g}=a,y=(0,r.Z)(a,p),v={direction:s,spacing:l};return(0,d.jsx)(h,(0,o.Z)({as:i,ownerState:v,ref:t},y,{children:u?m(g,u):g}))}))},76031:(e,t,n)=>{"use strict";n.r(t),n.d(t,{capitalize:()=>o.Z,createChainedFunction:()=>a,createSvgIcon:()=>i.Z,debounce:()=>s.Z,deprecatedPropType:()=>c,isMuiElement:()=>l.Z,ownerDocument:()=>u.Z,ownerWindow:()=>f.Z,requirePropFactory:()=>d,setRef:()=>p,unstable_ClassNameGenerator:()=>x,unstable_useEnhancedEffect:()=>m.Z,unstable_useId:()=>h.Z,unsupportedProp:()=>g,useControlled:()=>y.Z,useEventCallback:()=>v.Z,useForkRef:()=>b.Z,useIsFocusVisible:()=>Z.Z});var r=n(37078),o=n(98216);const a=n(49064).Z;var i=n(82066),s=n(57144);const c=function(e,t){return()=>null};var l=n(96798),u=n(8038),f=n(5340);n(87462);const d=function(e,t){return()=>null};const p=n(7960).Z;var m=n(58974),h=n(27909);const g=function(e,t,n,r,o){return null};var y=n(49299),v=n(2068),b=n(51705),Z=n(79674);const x={configure:e=>{console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),r.Z.configure(e)}}},27909:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n(57579).Z},39707:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(87462),o=n(63366),a=n(59766),i=n(26809);const s=["sx"];function c(e){const{sx:t}=e,n=(0,o.Z)(e,s),{systemProps:c,otherProps:l}=(e=>{const t={systemProps:{},otherProps:{}};return Object.keys(e).forEach((n=>{i.Gc[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]})),t})(n);let u;return u=Array.isArray(t)?[c,...t]:"function"==typeof t?(...e)=>{const n=t(...e);return(0,a.P)(n)?(0,r.Z)({},c,n):c}:(0,r.Z)({},c,t),(0,r.Z)({},l,{sx:u})}},54393:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_});var r=n(67294),o=n(69397),a=n(26793),i=n(26447),s=n(8838),c=n(85893);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e){var t=(0,a.$)().t,n=l((0,r.useState)(""),2),s=n[0],u=n[1];return(0,r.useEffect)((function(){u(e.src)}),[e]),(0,c.jsxs)(i.Z,{spacing:1,direction:"column",children:[(0,c.jsx)("img",{src:s,alt:"",style:{width:"200px"}}),(0,c.jsxs)(i.Z,{spacing:1,direction:"row",alignItems:"center",children:[(0,c.jsxs)(o.Z,{variant:"contained",component:"label",children:[t("Upload"),(0,c.jsx)("input",{hidden:!0,accept:"image/*",name:e.name,onChange:function(t){t.target.files.length>0&&u(URL.createObjectURL(t.target.files[0])),e.onChange(t)},type:"file"})]}),(0,c.jsx)("div",{children:t("Maximum upload file size: 1MB")})]})]})}var d=n(17075),p=n(96974),m=n(54799),h=n(41733);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){var t=(0,a.$)().t,n=g((0,r.useState)([]),2),s=n[0],l=n[1];return(0,r.useEffect)((function(){l(e.src)}),[e]),(0,r.useEffect)((function(){console.log("images",s)}),[s]),(0,c.jsxs)(i.Z,{spacing:1,direction:"column",children:[(0,c.jsx)(i.Z,{style:{gap:"8px"},direction:"row",alignItems:"center",flexWrap:"wrap",children:s.length>0&&s.map((function(t,n){return(0,c.jsxs)("div",{style:{position:"relative"},children:[t.hasOwnProperty("id")&&e.hasOwnProperty("onDelete")&&(0,c.jsx)(m.Z,{style:{position:"absolute",right:0,top:0},onClick:function(n){e.onDelete(t.id)},size:"small",children:(0,c.jsx)(h.Z,{fontSize:"small"})}),(0,c.jsx)("img",{src:t.url,alt:"",style:{width:"200px"}})]},n)}))}),(0,c.jsxs)(i.Z,{spacing:1,direction:"row",alignItems:"center",children:[(0,c.jsxs)(o.Z,{variant:"contained",component:"label",children:[t("Upload"),(0,c.jsx)("input",{hidden:!0,accept:"image/*",name:e.name,onChange:function(t){t.target.files.length>0&&l(Object.values(t.target.files).map((function(e){return{url:URL.createObjectURL(e)}}))),e.onChange(t)},type:"file",multiple:!0})]}),(0,c.jsx)("div",{children:t("Maximum upload file size: 1MB")})]})]})}var b=n(9669),Z=n.n(b);function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}(e,t)||j(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(){var e=(0,a.$)().t,t=((0,p.s0)(),x((0,r.useState)([]),2)),n=t[0],o=t[1];(0,r.useEffect)((function(){u(),s.Z.on("placeChanged",(function(){u()}))}),[]);var l=function(e){if(e.target.files&&e.target.files.length>0){var t,n=new FormData;if(n.append("place_id",localStorage.getItem("place_id")),"giftcard_gallery"===e.target.name){t="".concat("","/api/files_many/").concat(e.target.name);var r,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=j(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}(e.target.files);try{for(o.s();!(r=o.n()).done;){var a=r.value;n.append("files[]",a)}}catch(e){o.e(e)}finally{o.f()}}else t="".concat("","/api/files/").concat(e.target.name),n.append("file",e.target.files[0]);Z().post(t,n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){u()})).catch((function(e){if(console.log("error",e.response.status),e.response&&e.response.data&&e.response.data.errors)for(var t=0,n=Object.entries(e.response.data.errors);t<n.length;t++){var r=x(n[t],2),o=(r[0],r[1]);s.Z.dispatch("notification",{type:"error",message:o})}else 401===e.response.status?s.Z.dispatch("notification",{type:"error",message:"Authorization error"}):413===e.response.status?s.Z.dispatch("notification",{type:"error",message:"The file failed to upload."}):(s.Z.dispatch("notification",{type:"error",message:e.message}),console.log("Error",e.message))})),e.target.value=null}},u=function(){Z().get("".concat("","/api/files_many_purposes"),{params:{place_id:localStorage.getItem("place_id"),purposes:["giftcard_on_amount","giftcard_on_experience","giftcard_gallery"]}}).then((function(e){o(e.data)})).catch((function(e){o({})}))},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=n.filter((function(t){return t.purpose===e}));return 0===r.length?"":t?r:r[0].url};return(0,c.jsxs)("div",{className:"pages__container",children:[(0,c.jsx)(i.Z,{spacing:10,mb:2,direction:"row",alignItems:"center",children:(0,c.jsx)("h2",{children:e("Giftcard Settings")})}),(0,c.jsx)(d.Z,{className:"my-3",component:"div",children:e("Picture for giftcard on amount")}),(0,c.jsx)(f,{name:"giftcard_on_amount",src:m("giftcard_on_amount"),onChange:function(e){l(e)}}),(0,c.jsx)(d.Z,{className:"my-3",component:"div",children:e("Picture for giftcard on experience")}),(0,c.jsx)(f,{name:"giftcard_on_experience",src:m("giftcard_on_experience"),onChange:function(e){l(e)}}),(0,c.jsx)(d.Z,{className:"my-3",component:"div",children:e("Pictures for giftcard gallery")}),(0,c.jsx)(v,{name:"giftcard_gallery",src:m("giftcard_gallery",!0)||[],onDelete:function(t){!function(t){window.confirm(e("Are you sure you want to delete this image?"))&&Z().delete("/api/files/"+t,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){u(),s.Z.dispatch("notification",{type:"success",message:"Image deleted successfully"})})).catch((function(e){s.Z.dispatch("notification",{type:"error",message:e.message}),console.log("Error",e)}))}(t)},onChange:function(e){l(e)}})]})}},64836:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);