"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[869],{35097:(e,t,n)=>{n.d(t,{Z:()=>r});const r=(0,n(1588).Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"])},84592:(e,t,n)=>{n.d(t,{Z:()=>r});const r=(0,n(1588).Z)("MuiListItemIcon",["root","alignItemsFlexStart"])},26336:(e,t,n)=>{n.d(t,{Z:()=>r});const r=(0,n(1588).Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"])},63931:(e,t,n)=>{n.d(t,{Z:()=>S});var r=n(63366),a=n(87462),i=n(67294),o=n(86010),s=n(94780),c=n(41796),l=n(90948),d=n(71657),u=n(59773),p=n(62308),m=n(58974),h=n(51705),g=n(35097),v=n(84592),f=n(26336),y=n(42429),b=n(85893);const Z=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex"],x=(0,l.ZP)(p.Z,{shouldForwardProp:e=>(0,l.FO)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((({theme:e,ownerState:t})=>(0,a.Z)({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${y.Z.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,c.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${y.Z.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,c.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${y.Z.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,c.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,c.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${y.Z.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${y.Z.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${g.Z.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${g.Z.inset}`]:{marginLeft:52},[`& .${f.Z.root}`]:{marginTop:0,marginBottom:0},[`& .${f.Z.inset}`]:{paddingLeft:36},[`& .${v.Z.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&(0,a.Z)({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${v.Z.root} svg`]:{fontSize:"1.25rem"}})))),S=i.forwardRef((function(e,t){const n=(0,d.Z)({props:e,name:"MuiMenuItem"}),{autoFocus:c=!1,component:l="li",dense:p=!1,divider:g=!1,disableGutters:v=!1,focusVisibleClassName:f,role:S="menuitem",tabIndex:k}=n,j=(0,r.Z)(n,Z),w=i.useContext(u.Z),C={dense:p||w.dense||!1,disableGutters:v},I=i.useRef(null);(0,m.Z)((()=>{c&&I.current&&I.current.focus()}),[c]);const $=(0,a.Z)({},n,{dense:C.dense,divider:g,disableGutters:v}),A=(e=>{const{disabled:t,dense:n,divider:r,disableGutters:i,selected:o,classes:c}=e,l={root:["root",n&&"dense",t&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},d=(0,s.Z)(l,y.K,c);return(0,a.Z)({},c,d)})(n),O=(0,h.Z)(I,t);let P;return n.disabled||(P=void 0!==k?k:-1),(0,b.jsx)(u.Z.Provider,{value:C,children:(0,b.jsx)(x,(0,a.Z)({ref:O,role:S,tabIndex:P,component:l,focusVisibleClassName:(0,o.Z)(A.focusVisible,f)},j,{ownerState:$,classes:A}))})}))},42429:(e,t,n)=>{n.d(t,{K:()=>a,Z:()=>i});var r=n(34867);function a(e){return(0,r.Z)("MuiMenuItem",e)}const i=(0,n(1588).Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"])},26447:(e,t,n)=>{n.d(t,{Z:()=>v});var r=n(63366),a=n(87462),i=n(67294),o=n(95408),s=n(44472),c=n(39707),l=n(59766),d=n(90948),u=n(71657),p=n(85893);const m=["component","direction","spacing","divider","children"];function h(e,t){const n=i.Children.toArray(e).filter(Boolean);return n.reduce(((e,r,a)=>(e.push(r),a<n.length-1&&e.push(i.cloneElement(t,{key:`separator-${a}`})),e)),[])}const g=(0,d.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>[t.root]})((({ownerState:e,theme:t})=>{let n=(0,a.Z)({display:"flex"},(0,o.k9)({theme:t},(0,o.P$)({values:e.direction,breakpoints:t.breakpoints.values}),(e=>({flexDirection:e}))));if(e.spacing){const r=(0,s.hB)(t),a=Object.keys(t.breakpoints.values).reduce(((t,n)=>(null==e.spacing[n]&&null==e.direction[n]||(t[n]=!0),t)),{}),i=(0,o.P$)({values:e.direction,base:a}),c=(0,o.P$)({values:e.spacing,base:a}),d=(t,n)=>{return{"& > :not(style) + :not(style)":{margin:0,[`margin${a=n?i[n]:e.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[a]}`]:(0,s.NA)(r,t)}};var a};n=(0,l.Z)(n,(0,o.k9)({theme:t},c,d))}return n})),v=i.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiStack"}),i=(0,c.Z)(n),{component:o="div",direction:s="column",spacing:l=0,divider:d,children:v}=i,f=(0,r.Z)(i,m),y={direction:s,spacing:l};return(0,p.jsx)(g,(0,a.Z)({as:o,ownerState:y,ref:t},f,{children:d?h(v,d):v}))}))},39707:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(87462),a=n(63366),i=n(59766),o=n(26809);const s=["sx"];function c(e){const{sx:t}=e,n=(0,a.Z)(e,s),{systemProps:c,otherProps:l}=(e=>{const t={systemProps:{},otherProps:{}};return Object.keys(e).forEach((n=>{o.Gc[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]})),t})(n);let d;return d=Array.isArray(t)?[c,...t]:"function"==typeof t?(...e)=>{const n=t(...e);return(0,i.P)(n)?(0,r.Z)({},c,n):c}:(0,r.Z)({},c,t),(0,r.Z)({},l,{sx:d})}},74869:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(67294),a=n(26793),i=n(26447),o=n(83321),s=n(16012),c=n(63931),l=n(22715),d=n(8838),u=n(9669),p=n.n(u),m=n(96974),h=n(85893);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const f=function(){var e=(0,a.$)().t,t=(0,m.s0)(),n=g((0,r.useState)("Stripe"),2),u=n[0],v=n[1],f=g((0,r.useState)(""),2),y=f[0],b=f[1],Z=g((0,r.useState)(""),2),x=Z[0],S=Z[1],k=g((0,r.useState)(""),2),j=k[0],w=k[1];(0,r.useEffect)((function(){C(),I(),$(),d.Z.on("placeChanged",(function(){C(),I(),$()}))}),[]);var C=function(){p().get("".concat("","/api/settings"),{params:{place_id:localStorage.getItem("place_id"),name:"stripe-key"},headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){b(e.data.value)})).catch((function(e){b("")}))},I=function(){p().get("".concat("","/api/settings"),{params:{place_id:localStorage.getItem("place_id"),name:"stripe-secret"},headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){S(e.data.value)})).catch((function(e){S("")}))},$=function(){p().get("".concat("","/api/settings"),{params:{place_id:localStorage.getItem("place_id"),name:"stripe-webhook-secret"},headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){w(e.data.value)})).catch((function(e){w("")}))};return(0,h.jsxs)("div",{className:"pages__container",children:[(0,h.jsxs)(i.Z,{spacing:10,mb:2,direction:"row",alignItems:"center",children:[(0,h.jsx)("h2",{children:e("Payment Gateway")}),(0,h.jsx)(o.Z,{variant:"contained",size:"sm",type:"button",onClick:function(){return t("/VideoGuides")},children:e("See Nubis Academy")})]}),(0,h.jsx)("div",{className:"container-fluid",children:(0,h.jsx)("div",{className:"row",children:(0,h.jsx)("div",{className:"mt-3",children:(0,h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),p().post("".concat("","/api/settings"),{place_id:localStorage.getItem("place_id"),name:"stripe-key",value:y}).then((function(e){d.Z.dispatch("notification",{type:"success",message:"Stripe Key saved"})})).catch((function(e){})),p().post("".concat("","/api/settings"),{place_id:localStorage.getItem("place_id"),name:"stripe-secret",value:x}).then((function(e){d.Z.dispatch("notification",{type:"success",message:"Stripe Secret saved"})})).catch((function(e){})),p().post("".concat("","/api/settings"),{place_id:localStorage.getItem("place_id"),name:"stripe-webhook-secret",value:j}).then((function(e){d.Z.dispatch("notification",{type:"success",message:"Stripe Webhook Secret saved"})})).catch((function(e){}))},children:[(0,h.jsxs)("div",{className:"d-flex align-items-center mb-3 gap-2",children:[(0,h.jsxs)("h5",{children:[e("Payment Gateway"),":"]}),(0,h.jsx)(s.Z,{value:u,id:"type",name:"type",size:"small",onChange:v,children:(0,h.jsx)(c.Z,{value:"Stripe",children:"Stripe"})})]}),(0,h.jsx)("div",{className:"row",children:(0,h.jsxs)("div",{className:"col-lg-6",children:[(0,h.jsx)("p",{children:e("In order to receive credit card payments and deposits from your guests, Nubisreservation must be connected to a Stripe account.")}),(0,h.jsxs)("p",{children:[e("With Stripe, you can quickly start receiving payments via credit card - without costs for creation or subscription. You can read more at "),(0,h.jsx)("a",{href:"https://stripe.com",children:"https://stripe.com"})]}),(0,h.jsx)("p",{children:e('Below, you must insert the "Publishable key", "Secret key" found under Company -> Developers -> Api Keys when you are logged into Stripe.')}),(0,h.jsxs)("p",{children:[e("То add the Webhook Secret you need to go Developers -> Webhooks -> Add endpoint. Then add this link to the requested field "),(0,h.jsx)("strong",{children:"https://nubisreservation.com/api/places/".concat(localStorage.getItem("place_id"),"/webhook")})]}),(0,h.jsx)("p",{children:e('Don\'t forget to add events to the Webhook by pressing "Select events" and add Payment Intent/payment_intent.succeeded event')}),(0,h.jsx)("p",{children:e("Then under Signing secret please press Reveal button to get your Webhook Secret")})]})}),(0,h.jsx)("div",{className:"mb-3",children:(0,h.jsx)(l.Z,{label:e("Stripe Key"),size:"small",fullWidth:!0,type:"text",id:"stripeKey",name:"stripeKey",required:!0,value:y,onChange:function(e){return b(e.target.value)}})}),(0,h.jsx)("div",{className:"mb-3",children:(0,h.jsx)(l.Z,{label:e("Stripe Secret"),size:"small",fullWidth:!0,type:"text",id:"secretKey",name:"secretKey",required:!0,value:x,onChange:function(e){return S(e.target.value)}})}),(0,h.jsx)("div",{className:"mb-3",children:(0,h.jsx)(l.Z,{label:e("Stripe Webhook Secret"),size:"small",fullWidth:!0,type:"text",id:"stripeWebhookSecret",name:"stripeWebhookSecret",required:!0,value:j,onChange:function(e){return w(e.target.value)}})}),(0,h.jsx)(o.Z,{variant:"contained",type:"submit",children:e("Save")})]})})})})]})}}}]);