"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[101],{22101:(e,r,t)=>{t.r(r),t.d(r,{default:()=>f});var n=t(67294),a=t(93379),i=t.n(a),s=t(25815),o={insert:"head",singleton:!1};i()(s.Z,o);s.Z.locals;var l=t(26793),c=t(22715),u=t(83321),d=t(85893);function m(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,a,i=[],s=!0,o=!1;try{for(t=t.call(e);!(s=(n=t.next()).done)&&(i.push(n.value),!r||i.length!==r);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==t.return||t.return()}finally{if(o)throw a}}return i}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return h(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return h(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function f(){var e=(0,l.$)().t,r=m((0,n.useState)(""),2),t=r[0],a=r[1],i=m((0,n.useState)(""),2),s=i[0],o=i[1],h=m((0,n.useState)([]),2),f=h[0],p=h[1],g=m((0,n.useState)([]),2),v=g[0],x=g[1],y=function(e){"email"===e.target.name&&a(e.target.value),"password"===e.target.name&&o(e.target.value)};return(0,d.jsxs)("div",{className:"pages__container",children:[(0,d.jsx)("h1",{className:"mt-4 text-center",children:e("Sign in")}),(0,d.jsx)("div",{className:"container",children:(0,d.jsx)("div",{className:"row",children:(0,d.jsxs)("div",{className:"col-lg-6 offset-lg-3",children:[(0,d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),axios.post("/api/login",{email:t,password:s}).then((function(e){localStorage.setItem("token",e.data.token),axios.get("/api/places/mine",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){e.data.length>0&&localStorage.setItem("place_id",e.data[0].id),localStorage.getItem("place_id")?window.location.href="/admin/DayView":window.location.href="/admin"})).catch((function(e){}))})).catch((function(e){if(p([]),x([]),e.response&&e.response.data&&e.response.data.errors)for(var r=0,t=Object.entries(e.response.data.errors);r<t.length;r++){var n=m(t[r],2),a=n[0],i=n[1];"email"===a&&p(i),"password"===a&&x(i)}else 401===e.response.status?x(["Authorization error"]):(x([e.message]),console.log("Error",e.message))}))},children:[(0,d.jsx)("div",{className:"mb-3",children:(0,d.jsx)(c.Z,{label:e("Email address"),required:!0,size:"small",fullWidth:!0,type:"email",id:"email",name:"email",onChange:y,error:f.length>0,helperText:(0,d.jsx)(d.Fragment,{children:f.map((function(r){return e(r)}))})})}),(0,d.jsx)("div",{className:"mb-3",children:(0,d.jsx)(c.Z,{label:e("Password"),required:!0,size:"small",fullWidth:!0,type:"password",id:"password",name:"password",onChange:y,error:v.length>0,helperText:(0,d.jsx)(d.Fragment,{children:v.map((function(r){return e(r)}))})})}),(0,d.jsx)(u.Z,{variant:"contained",type:"submit",children:e("Sign in")})]}),(0,d.jsx)("hr",{}),(0,d.jsx)(u.Z,{variant:"contained",href:"/admin/register",children:e("Create profile")})]})})})]})}},25815:(e,r,t)=>{t.d(r,{Z:()=>i});var n=t(23645),a=t.n(n)()((function(e){return e[1]}));a.push([e.id,"",""]);const i=a}}]);